---
description: Aggregates tests results in a multi-module maven project and store for the build.
parameters:
  maven_plugin:
    type: string
    default: surefire
steps:
  - run:
      name: "[maven_aggregate_tests_results] Copy test results"
      when: always
      command: |
        mkdir -p ~/test_results/<< parameters.maven_plugin >>/
        find . -type f -regex ".*/target/<< parameters.maven_plugin >>-reports/.*xml" -exec cp {} ~/test_results/<< parameters.maven_plugin >>/ \;
  - store_test_results:
      path: ~/test_results
