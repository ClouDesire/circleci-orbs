description: >
  Command to create a SSH Tunnel
parameters:
  background:
    type: boolean
    default: false
  custom_options:
    type: string
    default: ""
  jump_host:
    type: string
  jump_host_user:
    type: string
    default: ubuntu
  from_ip:
    type: string
    default: 127.0.0.1
  from_port:
    type: string
  to_ip:
    type: string
  to_port:
    type: string
steps:
  - run:
      name: SSH tunnel through << parameters.env >>
      background: << parameters.background >>
      command: |
        ssh -N -o "StrictHostKeyChecking no" \
        << parameters.custom_options >> \
        -L << parameters.from_ip >>:<< parameters.from_port >>:<< parameters.to_ip >>:<< parameters.to_port >> \
        << parameters.jump_host_user >>@<< parameters.jump_host >>
