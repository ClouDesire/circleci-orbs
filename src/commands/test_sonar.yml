description: "Setup steps"
parameters:
  sonar_version:
    type: string
    default: "3.0.3.778"
  sonar_script_path:
    type: string
    default: ""
steps:
  - restore_cache:
      keys:
        - v<<parameters.cache_version>>-sonarcloud-scanner-<< parameters.sonar_version >> 
  - run:
      environment:
        SONAR_VERSION: <<parameters.sonar_version>>
      name: Execute sonar
      command: <<include(scripts/sonar.sh)>>
  - save_cache:
      key: v<<parameters.cache_version>>-sonarcloud-scanner-<< parameters.sonar_version >>
      paths: /tmp/cache/scanner