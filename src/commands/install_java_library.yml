---
description: |
  Install a java library from a git repo
parameters:
  repo: 
    type: string
  branch:
    type: string
    default: master
  dir:
    type: string
    default: "~/"
steps:
  - checkout_repo:
      repo: << parameters.repo >>
      branch: << parameters.branch >>
      dir: << parameters.dir >>
  - run:
      command: |
        #!/bin/bash -ex
        # required for automerge
        git config --global user.email "circleci@cloudesire.com"
        git config --global user.name "CircleCI"

        if [ "master" != "$CIRCLE_BRANCH" ]; then
          cd << parameters.dir >>/<< parameters.repo >>
          set +e
          git checkout "$CIRCLE_BRANCH" && git merge origin/master
          set -e
          git branch
          ./mvnw clean install -Dmaven.test.skip=true -Dmaven.javadoc.skip=true
        fi;
