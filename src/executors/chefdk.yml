description: >
  Executore with chefDK installed
parameters:
  version:
    type: string
    default: 4.9.7
  cookbook_branch:
    type: string
    default: master
  resource_class:
    type: string
    default: master
  chef_license:
    type: string
    default: accept
docker:
  - image: chef/chefdk:<< parameters.version >>
    auth:
      username: $DOCKERHUB_USERNAME
      password: $DOCKERHUB_PASSWORD
resource_class: << parameters.resource_class >>
environment:
  CHEF_LICENSE: << parameters.chef_license >>
  COOKBOOK_BRANCH: << parameters.cookbook_branch >>
